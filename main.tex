\documentclass[]{assignment}

\عنوان{سری چهارم
  \\[0.5cm]
  آشنایی با پلتفرم}

\begin{document}

\عنوان‌ساز

\قسمت{مقدمه}

آزمایشگاه اینترنت اشیا دانشکده مهندسی کامپیوتر در تابستان ۹۵ تصمیم گرفت تا پیاده‌سازی یک میان‌افزار برای پروژه هوشمند‌سازی دانشکده مهندسی کامپیوتر به صورت آزمایشی صورت دهد.
قرار بود این میان‌افزار بتواند نیازمندی‌های پروژه‌ی هوشمندسازی دانشکده مهندسی کامپیوتر را برآورده کرده و پیاده‌سازی برنامه‌های کاربردی را ساده‌تر کند.
با توجه به محدودیت منابع قرار بود این پیاده‌سازی منابع سخت‌افزاری
زیادی را مصرف نکرده بتواند حتی روی یک \متن‌لاتین{Raspberry Pi} نیز اجرا شود.

این میان‌افزار \متن‌لاتین{Middleware in Action} یا اختصارا \متن‌لاتین{MiA} نام گرفت و
با توجه به سادگی زبان پایتون قرار شد از این زبان استفاده شود.
این میان‌افزار دو نقش\پانویس{Actor} دارد. نقش اول کاربرانی هستند که با استفاده از این میان‌افزار ساختمان هوشمند را نظارت کرده و پارامترهایی مانند شدت‌نور،
دما و رطوبت را کنترل می‌کنند. این افراد نیاز دارند تا داده‌های حسگرها را به صورت تجمیع شده داشته باشند و از سوی دیگر بتوانند به واسطه عملگرها سیستم‌هایی مانند
تهویه، سرمایش و گرمایش را کنترل کنند.
نقش دوم برنامه‌نویسان هستند که قصد دارند اشیا جدیدی را به این میان‌افزار اضافه کرده یا با استفاده از رابط برنامه‌نویسی آن برنامه‌های کاربردی را توسعه دهند.
نیاز این گروه وجود رابط‌های برنامه‌نویسی مناسب در سمت سخت‌افزار و نرم‌افزار است. برای ارتباط نرم‌افزاری یک پروتکل محبوب \متن‌لاتین{HTTP} است که در
\متن‌لاتین{MiA} از آن استفاده شد و برای ارتباط سخت‌افزار نیاز به یک پروتکل دو طرفه و همزمان\پانویس{Realtime} وجود دارد که برای اجرا روی سخت‌افزارهایی با
منابع محدود نباید پیچیدگی زیادی داشته باشد. در \متن‌لاتین{MiA} از پروتکل \متن‌لاتین{MQTT} برای ارتباط با اشیا استفاده می‌شود.

پروژه هوشمند‌سازی دانشکده مهندسی کامپیوتر شامل هوشمند‌سازی دو فضای مجزا بود. فضای اول اتاق سابق شورا دانشکده و فضای دوم آزمایشگاه اینترنت اشیا بود.
این میان‌افزار با استفاده از مفهوم \متن‌لاتین{Tenant} اجازه می‌دهد دو سرور مجزای \متن‌لاتین{MiA} با استفاده از یک گارگزار\پانویس{Broker} \متن‌لاتین{MQTT}
بتوانند فعالیت کنند و داده‌های اشیا را بدون تداخل جمع‌آوری کنند.
ساختار طراحی شده در پروژه هوشمند‌سازی شامل تعدادی حسگر و عملگر بود که با استفاده از یک شبکه حسگر بی‌سیم به یک گره‌ی \متن‌لاتین{Raspberry Pi}
متصل می‌شدند. این گره اطالاعات این حسگرها و عملگرها را جمع‌آوری کرده و با توجه به توانایی اتصال به شبکه \متن‌لاتین{IP} می‌توانست آن‌ها را به میان‌افزار انتقال دهد.
با توجه به این معماری دو مفهوم \متن‌لاتین{Thing} و \متن‌لاتین{Agent} در \متن‌لاتین{MiA} تعبیه شدند. \متن‌لاتین{Thing} یا شی حسگرها و عملگرها را نمایندگی می‌کند
و \متن‌لاتین{Agent} گره‌ای با توانایی اتصال به شبکه \متن‌لاتین{IP} را نمایندگی می‌کند.
اشیا می‌توانند انواع مختلفی داشته باشند و هر یک از این انواع ویژگی‌های خاص خود را دارد. به طور مثال لامپ یک عملگر دو وضعیتی (خاموش یا روشن)
است و یک حسگر دما یک حسگر است که دما را در قالب یک عدد گزارش می‌کند.
در \متن‌لاتین{MiA} هر \متن‌لاتین{Thing} یک شناسه دارد که می‌بایست تنها میان شناسه‌های اشیا با همان نوع روی یک \متن‌لاتین{Agent} یکتا باشد و از سوی دیگر هر \متن‌لاتین{Agent} نیز یک شناسه
یکتا دارد.

از آنجایی که \متن‌لاتین{MiA} قصد دارد حداقل منابع را مصرف کند بسیاری از اطلاعات در حافظه \متن‌لاتین{RAM} نگهداری می‌شوند و تنها داده‌های اشیا روی پایگاه‌داده‌ای قرار می‌گیرند.
به تریتب \متن‌لاتین{MiA} می‌تواند تنها با یک کارگزار \متن‌لاتین{MQTT} و یک پایگاه‌داده‌ای اجرا شود.
میان‌افزار \متن‌لاتین{MiA} از یک ساختار داده‌ای و پروتکل مشخص برای ارتباط با \متن‌لاتین{Agent}ها استفاده می‌کند اما پیاده‌سازی این \متن‌لاتین{Agent}ها و چگونگی ارتباط آن‌ها با
اشیا بر عهده برنامه‌نویسان سخت‌افزاری است و تنها برای سادگی کار این افراد تعدادی \متن‌لاتین{SDK} ابتدایی توسط \متن‌لاتین{MiA} ارائه شده است.

با توجه به قابل اطمینان نبودن شبکه میان \متن‌لاتین{Thing}ها و \متن‌لاتین{Agent}ها و از سوی دیگر امکان خرابی در \متن‌لاتین{Agent}ها هر میان‌افزاری نیاز به یک مکانیزم پیدا کردن سرویس\پانویس{Service Desicovery}
دارد. در \متن‌لاتین{MiA} \متن‌لاتین{Agent}ها به صورت دوره‌ای لیست اشیا خود را ارسال می‌کنند و به این ترتیب سرور آخرین وضعیت هر \متن‌لاتین{Agent} و اشیا متصل به آن را داخل حافظه خود خواهد داشت.

\قسمت{لینک‌های مرتبط}

\شروع{فقرات}
\فقره \تارنما{https://github.com/I1820/mia}{کد منبع میان‌افزار \متن‌لاتین{MiA}}
\فقره \تارنما{https://github.com/I1820/mia.py}{کد منبع کتابخانه ارتباطی میان‌افزار \متن‌لاتین{MiA} به زبان پایتون}
\پایان{فقرات}

\قسمت{بخش تشریحی}

\شروع{شمارش}
\فقره پروتکل‌های \متن‌لاتین{MQTT}، \متن‌لاتین{CoAP} و \متن‌لاتین{HTTP} را از منظر معماری، کابردها و \نقاط‌خ مقایسه کنید.
\فقره بزرگ‌ترین مشکل \متن‌لاتین{CoAP} و \متن‌لاتین{MQTT} را جداگانه بررسی کرده و برای هر کدام راه‌حل پیشنهاد شده را توضیح دهید.
\فقره در پیاده‌سازی لایه \متن‌لاتین{Application} در دنیای \متن‌لاتین{IoT} نیاز هست که دستگاه‌های انتهایی\پانویس{end-device} را بتوانیم به گونه‌ای شناسایی کنیم. (شناسه دستگاه‌ باید منحصر به فرد باشند) در دنیای واقعی عموما این شناسه دستگاه‌ شامل چه اطلاعاتی هستند؟
\فقره یکی از چالش‌های پیاده‌سازی در لایه \متن‌لاتین{Application}، در نظر گرفتن مدل اطلاعاتی\پانویس{Data Model} مشخص برای اطلاعات دریافتی از سنسور است.
برای مثال فرض کنید سنسور‌های دما، رطوبت خاک، درب و تشخیص حرکت داریم. بهتر است برای هر کدام از این سنسورها مدل اطلاعاتی جداگانه در نظر بگیریم یا اینکه یک مدل اطلاعاتی برای همه سنسور‌ها در نظر بگیریم؟
یک روشی که برای حل این مشکل پیشنهاد شده است، استفاده از SenML هست. این روش را توضیح دهید.
\پایان{شمارش}


\قسمت{بخش عملی}

گروه‌های دو نفره در قسمت عملی می‌بایست پیاده‌سازی یک \متن‌لاتین{Agent} را روی بردشان صورت بدهند.
برای اینکار نیاز است که ارتباط \متن‌لاتین{MQTT}
با سرور برقرار شده و اطلاعات حسگرها در قالب \متن‌لاتین{Thing} ارسال شود. در نظر داشته باشید نیازی به پیاده‌سازی عملگرها در \متن‌لاتین{Agent} نیست.
قسمت مهم دیگر در یک \متن‌لاتین{Agent} ارسال دوره‌ای لیست اشیا متصل و وضعیت آن‌ها است. در \متن‌لاتین{MiA} به این عملیات‌ها به ترتیب عملیات
\متن‌لاتین{Ping} و \متن‌لاتین{Log} می‌گوییم. برای جزئیات چگونگی پیاده‌سازی این دو مورد \تارنما{https://github.com/I1820/mia#how-to-implement-an-agent}{اینجا} را ببینید.

بعد از پیاده‌سازی می‌توانید برد خود را به نسخه‌ای از \متن‌لاتین{MiA} که بالا آورده‌اید متصل کنید.
برای بالا آوردن \متن‌لاتین{MiA} \تارنما{https://github.com/I1820/mia#up-and-running}{اینجا} را ببینید.
سپس می‌توانید با استفاده از درخواست‌های \متن‌لاتین{HTTP} اطلاعات خودتان را دریافت کنید.


\قسمت{بخش تئوری}

گروه‌های انفرادی در قسمت تئوری می‌بایست پیاده‌سازی یک \متن‌لاتین{Agent} را روی سیستم خودشان با زبان برنامه‌نویسی مورد علاقه‌شان انجام دهند.
برای اینکار نیاز است که ارتباط \متن‌لاتین{MQTT}
با سرور برقرار شده و اطلاعات حسگرها در قالب \متن‌لاتین{Thing} ارسال شود. در نظر داشته باشید نیازی به پیاده‌سازی عملگرها در \متن‌لاتین{Agent} نیست.
قسمت مهم دیگر در یک \متن‌لاتین{Agent} ارسال دوره‌ای لیست اشیا متصل و وضعیت آن‌ها است. در \متن‌لاتین{MiA} به این عملیات‌ها به ترتیب عملیات
\متن‌لاتین{Ping} و \متن‌لاتین{Log} می‌گوییم. برای جزئیات چگونگی پیاده‌سازی این دو مورد \تارنما{https://github.com/I1820/mia#how-to-implement-an-agent}{اینجا} را ببینید.

بعد از پیاده‌سازی می‌توانید برد خود را به نسخه‌ای از \متن‌لاتین{MiA} که بالا آورده‌اید متصل کنید.
برای بالا آوردن \متن‌لاتین{MiA} \تارنما{https://github.com/I1820/mia#up-and-running}{اینجا} را ببینید.
سپس می‌توانید با استفاده از درخواست‌های \متن‌لاتین{HTTP} اطلاعات خودتان را دریافت کنید.

در ادامه همانطور که بیان شده بود \متن‌لاتین{MiA} برای استفاده در محیط‌های عملیاتی طراحی نشده است و ایرادات زیادی دارد. یکی از این ایرادها پروسه احراز هویت اشیا
در هنگام اتصال و جلوگیری از اتصال اشیا غیرمعتبر است. برای حل این مشکل راه حلی پیشنهاد دهید. راه حل شما می‌بایست \متن‌لاتین{Agent} را در پیام‌های دوره‌ای
\متن‌لاتین{Ping} و پیام‌های داده‌ای \متن‌لاتین{Log} احراز هویت کرده و تایید کند این شی از لیست اشیایی است که توانایی اتصال به \متن‌لاتین{MiA}
را دارند. این لیست از پیش روی \متن‌لاتین{MiA} تعریف شده است. روش پیشنهادی خود را با روش‌های \متن‌لاتین{ABP} و \متن‌لاتین{OTAA} مقایسه کنید.
این روش بر روی \متن‌لاتین{MiA} و \متن‌لاتین{Agent} نمونه آن که در قالب کد پایتون \متن‌لاتین{dummy.py} در مخزن این پروژه قرار دارد پیاده‌سازی کنید.

\پایان‌ساز

\end{document}
